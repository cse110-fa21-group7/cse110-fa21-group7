<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>spa-test/assets/scripts/main.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <li class="nav-link nav-home-link"><a href="index.html">Home</a></li><li class="nav-heading">Classes</li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="RecipeCard.html">RecipeCard</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="RecipeCard.html#setPage">setPage</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="RecipeCard.html#setPage">setPage</a></span></li><li class="nav-heading"><a href="global.html">Globals</a></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#addCurated">addCurated</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#addExamples">addExamples</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#addList">addList</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#bindEscKey">bindEscKey</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#bindNavbarLinks">bindNavbarLinks</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#checkID">checkID</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#checkValid">checkValid</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#createSections">createSections</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#currInit">currInit</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#fetchFullRecipe">fetchFullRecipe</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#fetchRecipes">fetchRecipes</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#file">file</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getID">getID</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getPage">getPage</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getRecipesFromCache">getRecipesFromCache</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#hasFloat">hasFloat</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#hasValue">hasValue</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#init">init</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#makePage">makePage</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#populateForm">populateForm</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#populateHTML">populateHTML</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#readRecipe">readRecipe</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#recipeCards">recipeCards</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#removeTags">removeTags</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#setButtonListener">setButtonListener</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#setSearchListener">setSearchListener</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#showError">showError</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#showMessage">showMessage</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#showSuccess">showSuccess</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#spoonToASAP">spoonToASAP</a></span></li>
</nav>

<div id="main">
    
    <h1 class="page-title">spa-test/assets/scripts/main.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// main.js

import { Router } from "./Router.js";

let recipeData = {};

const navbarLinks = [
  ["#ASAP-logo-home", "home"],
  ["#link-cookbook", "cookbook"],
  ["#link-create-recipe", "create-recipe"],
  ["#link-read-recipe", "read-recipe"],
];

const router = new Router(function () {
  const doc = document;
  doc.querySelector("section.section--navbar").classList.add("shown");
  doc.querySelector("div.div--asap-recipe-header").classList.add("shown");
  doc.querySelector("section.section--home").classList.add("shown");
  doc.querySelector("section.section--create-recipe").classList.remove("shown");
  doc.querySelector("section.section--main-container").classList.add("shown");
  doc.querySelector("section.section--read-recipe").classList.remove("shown");
});

window.addEventListener("DOMContentLoaded", init);

/** Initialize function, begins all of the JS code in this file */
async function init() {
  console.log("Initializing");
  bindNavbarLinks();
  createSections();
  bindEscKey();
  getRecipesFromCache();
}

/**
 * Gets recipes from localStorage
 */
function getRecipesFromCache() {
  console.log("Getting recipes from cache");
  const json = localStorage.getItem("recipes");

  if (json === null) {
    console.log("Recipes not initialized in cache");
    localStorage.setItem("recipes", JSON.stringify(recipeData));
    return;
  }

  recipeData = JSON.parse(localStorage.getItem("recipes"));
  if (Object.keys(recipeData).length == 0) {
    console.log("Empty recipes object");
  }
}
/**
 * Takes in recipe id, returns recipe object from recipes
 * @param {String} id
 * @param {HTMLElement} element
 * @return {Object}
 */
// function loadRecipe(id, element) {
//   const recipe = null;
//   if (recipes.id == null) {
//     console.log(`Recipes does not contain id: ${id}`);
//     return recipe;
//   }
//   recipe = recipes.id;
//   const recipeTitleElem = document.getElementById("recipeTitle");
//   recipeTitleElem.innerText = recipe.title;
//   const ingredient1NameElem = document.getElementById("ingredient1name");
//   ingredient1NameElem.innerText = recipe.ingredients[0].name;
//   // const ingredient2NameElem = document.getElementById('ingredient2name')
//   // ingredient2NameElem.innerText = recipe.ingredients[1].name
//   const step1Elem = document.getElementById("step1");
//   step1Elem.innerText = recipe.steps[0];
// }

/**
 * Generates the &lt;recipe-card> elements from the fetched recipes and
 * appends them to the page
 */
function createSections() {
  /*
  let i = 0
  for (const [..., json] of Object.entries(recipeData)) {
    const recipeCard = document.createElement('recipe-card');
    recipeCard.data = json;
    const page = json['page-name'];
    router.addPage(page, function() {
      document.querySelector('.section--recipe-cards').classList.remove('shown');
      document.querySelector('.section--recipe-expand').classList.add('shown');
      document.querySelector('recipe-expand').data = json;
    });
    bindRecipeCard(recipeCard, page);

    document.querySelector('.recipe-cards--wrapper').appendChild(recipeCard);
    if (i > 2) {
      recipeCard.classList.add('hidden');
    }
    i++;
  }
  */
  router.addPage("create-recipe", function () {
    const doc = document;
    doc.querySelector("section.section--navbar").classList.add("shown");
    doc.querySelector("div.div--asap-recipe-header").classList.add("shown");
    doc.querySelector("section.section--home").classList.remove("shown");
    doc.querySelector("section.section--main-container").classList.add("shown");
    doc.querySelector("section.section--create-recipe").classList.add("shown");
    doc.querySelector("section.section--read-recipe").classList.remove("shown");
  });

  router.addPage("read-recipe", function () {
    const doc = document;
    doc.querySelector("section.section--navbar").classList.add("shown");
    doc.querySelector("section.section--home").classList.remove("shown");
    doc.querySelector("div.div--asap-recipe-header").classList.add("shown");
    doc.querySelector("section.section--main-container").classList.add("shown");
    doc
      .querySelector("section.section--create-recipe")
      .classList.remove("shown");
    doc.querySelector("section.section--read-recipe").classList.add("shown");
  });

  console.log("Router navigate to home");
  router.navigate("home", true);
}

/**
 * Binds the click event listeners to the "Show more" button so that when it is
 * clicked more recipes will be shown
 */
function bindNavbarLinks() {
  console.log("Binding Navbar links");
  navbarLinks.forEach((link) => {
    console.log(link);
    const elem = document.querySelector(link[0]);

    elem.addEventListener("click", () => {
      router.navigate(link[1], false);
      console.log(`Clicked ${link[1]}`);
    });
  });
  /*
  const ASAPRecipeLink = document.querySelector('#ASAP-logo-home')
  const linkHome = document.querySelector('#link-home')
  const linkCookbook = document.querySelector('#link-cookbook')
  const linkCreateRecipe = document.querySelector('#link-create-recipe')
  const linkHelp = document.querySelector('#link-help')
  // const showMore = document.querySelector('.button--wrapper > button');
  // const arrow = document.querySelector('.button--wrapper > img');
  // const cardsWrapper = document.querySelector('.recipe-cards--wrapper');

  ASAPRecipeLink.addEventListener('click', () => {
    router.navigate('home', false)
  })

  linkHome.addEventListener('click', () => {
    router.navigate('home', false)
  })

  linkCookbook.addEventListener('click', () => {
    router.navigate('cookbook', false)
  })

  linkCreateRecipe.addEventListener('click', () => {
    router.navigate('create-recipe', false)
  })

  linkHelp.addEventListener('click', () => {
    router.navigate('help', false)
  })
  */
}

/**
 * Binds the click event listener to the &lt;recipe-card> elements added to the
 * page so that when they are clicked, their card expands into the full recipe
 * view mode
 * @param {Element} recipeCard the &lt;recipe-card> element you wish to bind the
 *                              event listeners to
 * @param {String} pageName the name of the page to navigate to on click
 */
// function bindRecipeCard(recipeCard, pageName) {
//   recipeCard.addEventListener("click", (e) => {
//     // console.log(`Clicked on ${pageName}`);
//     if (e.path[0].nodeName == "A") return;
//     router.navigate(pageName, false);
//   });
// }

/**
 * Binds the 'keydown' event listener to the Escape key (esc) such that when
 * it is clicked, the home page is returned to
 */
function bindEscKey() {
  document.addEventListener("keydown", (e) => {
    if (e.key === "Escape") {
      router.navigate("home", false);
    }
  });
}
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.4</a> on Tue Nov 30 2021 06:40:06 GMT+0000 (Coordinated Universal Time) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
